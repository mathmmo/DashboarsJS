<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão de Frota | Dashboard</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
</head>
    <body>
        <div id="wrapper">
            <div id="page-wrapper" class="gray-bg">
                <div class="wrapper wrapper-content">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="ibox">
                                <div class="ibox-title">
                                    <div class="ibox-tools">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <span class="label label-success float-right pesquisar-cliente">Pesquisar Cliente</span>
                                            </div>
                                            <div class="col-md-10">
                                                <select class="form-control m-b" id="client" onchange="initMap()">
                                                    <option>Cliente1</option>
                                                    <option>Cliente2</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="ibox">
                                <div class="ibox-title">
                                    <h5>Localização</h5>
                                </div>
                                <div class="ibox-content">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div id="map"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-9">
                            <div class="ibox">
                                <div class="ibox-title">
                                    <h5>Tabela de Eventos</h5>
                                    <div class="ibox-tools">
                                        <div class="btn-group">
                                            <button type="button" class="btn btn-xs btn-white"><<</button>
                                            <button type="button" class="btn btn-xs btn-white active">1</button>
                                            <button type="button" class="btn btn-xs btn-white">2</button>
                                            <button type="button" class="btn btn-xs btn-white">3</button>
                                            <button type="button" class="btn btn-xs btn-white">4</button>
                                            <button type="button" class="btn btn-xs btn-white">>></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <div class="table-responsive">
                                        <table class="table table-striped">
                                            <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Data </th>
                                                <th>Hora</th>
                                                <th>Placa </th>
                                                <th>Odometro </th>
                                                <th>Ignição </th>
                                                <th>Descrição </th>
                                            </tr>
                                            </thead>
                                            <tbody class="tableBody">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="ibox">
                                <div class="ibox-title">
                                    <h5>
                                        Estatíscas
                                    </h5>
                                </div>
                                <div class="ibox-content">
                                    <div class="row text-center">
                                        <div class="col-lg-12">
                                            <canvas id="doughnutChart2" style="margin: 18px auto 0px; display: block; width: 100%; height: 200px;"></canvas>
                                            <h5>Eventos</h5>
                                        </div>
                                    </div>
                                    <div class="m-t">
                                        <small>Um pequeno grafico com informações pertinentes resumidas para controle de frota.</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-3">
                            <div class="ibox">
                                <div class="ibox-title">
                                    <h5>Horimetro</h5>
                                </div>
                                <div class="ibox-content">
                                    <ul class="list-group clear-list m-t">
                                        <li class="list-group-item fist-item pointer active">
                                            <span class="label label-warning">ABC-1234</span> 
                                            <span class="float-right">
                                                Total 085059
                                            </span>
                                        </li>
                                        <li class="list-group-item pointer">
                                            <span class="label label-warning plateLabel">BBB-1234</span>
                                            <span class="float-right">
                                                Total 025019
                                            </span>
                                        </li>
                                        <li class="list-group-item pointer">
                                            <span class="label label-warning plateLabel">DDD-1234</span>
                                            <span class="float-right">
                                                Total 008651
                                            </span>
                                        </li>
                                        <li class="list-group-item pointer">
                                            <span class="label label-warning plateLabel">FFF-1234</span>
                                            <span class="float-right">
                                                Total 045316
                                            </span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-9">
                            <div class="ibox">
                                <div class="ibox-title" id="titleGraph">
                                    <h5>Detalhe Horimetro</h5>
                                    <div class="ibox-tools">
                                        <div class="btn-group">
                                            <button type="button" class="btn btn-xs btn-white active" id="btnHours">Hora a Hora</button>
                                            <button type="button" class="btn btn-xs btn-white" id="btnDays">Diário</button>
                                            <button type="button" class="btn btn-xs btn-white" id="btnMonths">Mensal</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="ibox-content">  
                                    <div class="graph1" id="chartDiv">
                                        <canvas id="barChart"></canvas>
                                    </div>
                                    <div class="flot-chart graph2">
                                        <div class="flot-chart-content" id="flot-bar-chart">

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer">
                    <div class="float-right">
                        Mock-up by <strong>Matheus Oliveira</strong>.
                    </div>
                    <div>
                        Copyright<strong> Pogo Enterprise</strong>.
                    </div>
                </div>
            </div>
        </div>
        <!-- Mainly scripts -->
        <script src="js/jquery/jquery-3.1.1.min.js"></script>
        <script src="js/popper.min.js"></script>
        <script src="js/bootstrap/bootstrap.js"></script>
        <script src="js/plugins/metisMenu/metisMenu.js"></script>
        <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
        <!-- Flot -->
        <script src="js/plugins/flot/jquery.flot.js"></script>
        <script src="js/plugins/flot/jquery.flot.tooltip.min.js"></script>
        <script src="js/plugins/flot/jquery.flot.spline.js"></script>
        <script src="js/plugins/flot/jquery.flot.resize.js"></script>
        <script src="js/plugins/flot/jquery.flot.pie.js"></script>
        <script src="js/plugins/flot/jquery.flot.symbol.js"></script>
        <script src="js/plugins/flot/jquery.flot.time.js"></script>
        <script src="http://www.benjaminbuffet.com/public/js/jquery.flot.orderBars.js"></script>
        <!-- Peity -->
        <script src="js/plugins/peity/jquery.peity.min.js"></script>
        <script src="js/demo/peity-demo.js"></script>
        <!-- Custom and plugin javascript -->
        <script src="js/inspinia.js"></script>
        <script src="js/plugins/pace/pace.min.js"></script>
        <!-- jQuery UI -->
        <script src="js/plugins/jquery-ui/jquery-ui.min.js"></script>
        <!-- Jvectormap -->
        <script src="js/plugins/jvectormap/jquery-jvectormap-2.0.2.min.js"></script>
        <script src="js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
        <!-- EasyPIE -->
        <script src="js/plugins/easypiechart/jquery.easypiechart.js"></script>
        <!-- ChartJS-->
        <script src="js/plugins/chartJs/Chart.min.js"></script>
        <!-- <script src="js/plugins//chartJs/angles.js"></script> -->
        <!-- Sparkline -->
        <script src="js/plugins/sparkline/jquery.sparkline.min.js"></script>
        <!-- Sparkline demo data  -->
        <script src="js/demo/sparkline-demo.js"></script>
        <script>
            "use strict";
            let map;
      
            function initMap() {
                //New map
                map = new google.maps.Map(document.getElementById("map"), {
                    center: {
                        lat: -22.845837,
                        lng: -47.083258
                    },
                    zoom: 15
                });
                //Multiple Markers
                //function addMarkers()
                function mapping(){
                    var obj = $('#client')[0].value == 'Cliente1' ? vehicleLastPos2 : vehicleLastPos;
                    obj.data.forEach(element => {
                        var marker = new google.maps.Marker({
                            position: {
                                lat: parseFloat(element.latitude) ,
                                lng: parseFloat(element.longitude)
                            },
                            map: map, 
                            icon: element.ignition == 'ON' ? './src/assets/bulldozerONmin.png' : './src/assets/bulldozerOFFmin.png'
                        });
                        var InfoWindow = new google.maps.InfoWindow({
                            content: 
                                '<h5 style="padding-left: 18px; margin-bottom: 8px;">PLACA : ' + element.plate + '</h5>' +
                                '<ul style="padding-left: 18px;">' +
                                    '<li>' + element.label + '</li>' +
                                    '<li>Ignição: ' + element.ignition + '</li>' +
                                    '<li>Odometro: ' + element.odometer + '</li>' +
                                    '<li>Horimetro: ' + element.horimeter + '</li>' +
                                    '<li>Bateria 1: ' + element.mainBattery + '%</li>' +
                                    '<li>Bateria 2: ' + element.backupBattery + '%</li>' +
                                    '<li>Motorista: ' + element.driverId + '</li>' +
                                '</ul>',
                        });
                        marker.addListener('click', () => {
                            InfoWindow.open(map,marker);
                        });
                    });
                }
                mapping();
            }
        </script>
        <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyACSjChAW7YLx-GADVD4LurwWhVM0B1cG8&callback=initMap&libraries=&v=weekly"
        ></script>
        <!-- DEMO DATA -->
        <script>
            //JSON DATA
            //LAST POS
            var vehicleLastPos = {
                "success": true,
                "error": 0,
                "data": [
                    {
                        "vehicleId": 1,
                        "plate": "AAA1234",
                        "label": "Frota A",
                        "positionId": 16145844,
                        "date": "2018-01-05 14:25:27",
                        "systemDate": "2018-09-26 14:35:15",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.846837",
                        "longitude": "-47.083258",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 123456,
                        "mainBattery": "13.10",
                        "backupBattery": "90.25",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "61747659",
                        "horimeter": "085059",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 2,
                        "plate": "BBB1234",
                        "label": "Frota A",
                        "positionId": 16145844,
                        "date": "2018-09-26 11:19:27",
                        "systemDate": "2018-10-15 11:20:01",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.845437",
                        "longitude": "-47.088758",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 654321,
                        "mainBattery": "18.50",
                        "backupBattery": "40.10",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "12548965",
                        "horimeter": "025019",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 3,
                        "plate": "DDD1234",
                        "label": "Frota B",
                        "positionId": 16145843,
                        "date": "2018-09-29 08:30:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "OFF",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.848937",
                        "longitude": "-47.087758",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 456789,
                        "mainBattery": "53.90",
                        "backupBattery": "100.00",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "985135",
                        "horimeter": "008651",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 4,
                        "plate": "FFF0001",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.845237",
                        "longitude": "-47.088258",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 5,
                        "plate": "FFF0041",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "OFF",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.845837",
                        "longitude": "-47.089258",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 6,
                        "plate": "ASD1665",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.847237",
                        "longitude": "-47.089000",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 7,
                        "plate": "ASD5451",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.846000",
                        "longitude": "-47.088548",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 8,
                        "plate": "WHD1565",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "OFF",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.846197",
                        "longitude": "-47.089958",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 9,
                        "plate": "HRF5416",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.846165",
                        "longitude": "-47.089198",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 10,
                        "plate": "GJE5065",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.846156",
                        "longitude": "-47.089615",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 11,
                        "plate": "KFP0532",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.847237",
                        "longitude": "-47.088758",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 12,
                        "plate": "KEL8106",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "OFF",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.846537",
                        "longitude": "-47.089008",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 13,
                        "plate": "OLA1234",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.844137",
                        "longitude": "-47.089958",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 14,
                        "plate": "KDK5155",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "OFF",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.847837",
                        "longitude": "-47.080258",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 15,
                        "plate": "ODO1565",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "OFF",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.852237",
                        "longitude": "-47.085258",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 16,
                        "plate": "KJV6165",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.841837",
                        "longitude": "-47.088258",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    }
                ]
            }
            var vehicleLastPos2 = {
                "success": true,
                "error": 0,
                "data": [
                    {
                        "vehicleId": 1,
                        "plate": "AAA1234",
                        "label": "Frota A",
                        "positionId": 16145844,
                        "date": "2018-01-05 14:25:27",
                        "systemDate": "2018-09-26 14:35:15",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.846837",
                        "longitude": "-47.083258",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 123456,
                        "mainBattery": "13.10",
                        "backupBattery": "90.25",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "61747659",
                        "horimeter": "085059",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 2,
                        "plate": "BBB1234",
                        "label": "Frota A",
                        "positionId": 16145844,
                        "date": "2018-09-26 11:19:27",
                        "systemDate": "2018-10-15 11:20:01",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.849737",
                        "longitude": "-47.083896",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 654321,
                        "mainBattery": "18.50",
                        "backupBattery": "40.10",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "12548965",
                        "horimeter": "025019",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 3,
                        "plate": "DDD1234",
                        "label": "Frota B",
                        "positionId": 16145843,
                        "date": "2018-09-29 08:30:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "OFF",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.849937",
                        "longitude": "-47.089876",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 456789,
                        "mainBattery": "53.90",
                        "backupBattery": "100.00",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "985135",
                        "horimeter": "008651",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 4,
                        "plate": "FFF0001",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "ON",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.845237",
                        "longitude": "-47.088258",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    },
                    {
                        "vehicleId": 5,
                        "plate": "FFF0041",
                        "label": "Frota C",
                        "positionId": 16145842,
                        "date": "2018-09-26 22:15:27",
                        "systemDate": "2018-09-26 11:20:01",
                        "ignition": "OFF",
                        "speed": "0",
                        "output1": "OFF",
                        "output2": "OFF",
                        "latitude": "-22.845837",
                        "longitude": "-47.089258",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "deviceId": 987654,
                        "mainBattery": "00.00",
                        "backupBattery": "80.50",
                        "driverId": "1F00CA1221AA31",
                        "vehicleType": 5,
                        "odometer": "6189843",
                        "horimeter": "045316",
                        "rpm": "1000",
                        "temp1": "30",
                        "temp2": "22",
                        "temp3": "14",
                        "direction": "000.00"
                    }
                ]
            }
            //HIST POS
            var vehicleHistPos = {
                "success": true,
                "error": 0,
                "data": [
                    {
                        "plate": "ABC1234",
                        "deviceId": 1234,
                        "positionId": 1426,
                        "date": "2018-09-27 11:15:12",
                        "ignition": "OFF",
                        "odometer": "61783255",
                        "horimeter": "085120",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "direction": "000.00",
                        "speed": "0",
                        "mainBattery": "13.10",
                        "latitude": "-22.847178",
                        "longitude": "-47.08351",
                        "driverName": "",
                        "driverId": "",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",
                        "rs232": ""
                    },
                    {
                        "plate": "ABC1234",
                        "deviceId": 123456,
                        "positionId": 1425,
                        "date": "2018-09-27 10:15:12",
                        "ignition": "OFF",
                        "odometer": "61783255",
                        "horimeter": "085120",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "direction": "000.00",
                        "speed": "0",
                        "mainBattery": "13.13",
                        "latitude": "-22.147178",
                        "longitude": "-47.28351",
                        "driverName": "",
                        "driverId": "",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",
                        "rs232": ""
                    },
                    ,
                    {
                        "plate": "ABC1234",
                        "deviceId": 123456,
                        "positionId": 1424,
                        "date": "2018-09-27 10:15:12",
                        "ignition": "OFF",
                        "odometer": "61783255",
                        "horimeter": "085120",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "direction": "000.00",
                        "speed": "0",
                        "mainBattery": "13.13",
                        "latitude": "-22.830178",
                        "longitude": "-47.08851",
                        "driverName": "",
                        "driverId": "",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",
                        "rs232": ""
                    },
                    {
                        "plate": "ABC1234",
                        "deviceId": 123456,
                        "positionId": 1423,
                        "date": "2018-09-27 10:15:12",
                        "ignition": "OFF",
                        "odometer": "61783255",
                        "horimeter": "085120",
                        "address": "ALAMEDA PRAÇA CAPITAL - LOT. CENTER SANTA GENEBRA, CAMPINAS - SP, 13080-650",
                        "direction": "000.00",
                        "speed": "0",
                        "mainBattery": "13.13",
                        "latitude": "-22.847123",
                        "longitude": "-47.08897",
                        "driverName": "",
                        "driverId": "",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",
                        "rs232": ""
                    }
                ]
            }
            //HIST EVENT
            var vehicleHistEvent = {
                "success": true,
                "error": 0,
                "data": [
                    {
                        "eventId": 1122, //1
                        "date": "2018-09-26 09:19:32", //2
                        "plate": "ABC1234", //3
                        "deviceId": 123456,
                        "latitude": "-22.846767",
                        "longitude": "-47.083274",
                        "speed": "0",
                        "mainBattery": "13.07",
                        "odometer": "61747659", //4
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",
                        "complement": "",
                        "eventRef": "ALT_1",
                        "description": "Ultrapassou Limite de Velocidade", //5
                        "eventStatus": "A",
                        "address": "CONDOMÍNIO PRAÇA CAPITAL - R. ADELAIDE DANIEL DE ALMEIDA, 140 - CENTRO, CAMPINAS - SP",
                        "driverId": "",
                        "ignition": "ON" //6
                    },
                    {
                        "eventId": 1121,
                        "date": "2018-09-26 08:59:58",
                        "plate": "ABC1234",
                        "deviceId": 123456,
                        "latitude": "-22.846767",
                        "longitude": "-47.083274",
                        "speed": "0",
                        "mainBattery": "12.32",
                        "odometer": "61731629",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",             
                        "complement": "",
                        "eventRef": "ALT_10",
                        "description": "Saiu de Sleep Mode",
                        "eventStatus": "A",
                        "address": "CONDOMÍNIO PRAÇA CAPITAL - R. ADELAIDE DANIEL DE ALMEIDA, 140 - CENTRO, CAMPINAS - SP",
                        "driverId": "",
                        "ignition": "OFF"
                    },
                    {
                        "eventId": 1120,
                        "date": "2018-09-25 20:00:58",
                        "plate": "ABC1234",
                        "deviceId": 123456,
                        "latitude": "-22.046767",
                        "longitude": "-47.983274",
                        "speed": "0",
                        "mainBattery": "12.32",
                        "odometer": "61731629",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",             
                        "complement": "",
                        "eventRef": "ALT_34",
                        "description": "Desligou Ignicao",
                        "eventStatus": "A",
                        "address": "CONDOMÍNIO PRAÇA CAPITAL - R. ADELAIDE DANIEL DE ALMEIDA, 140 - CENTRO, CAMPINAS - SP",
                        "driverId": "",
                        "ignition": "OFF"
                    },
                    {
                        "eventId": 1119,
                        "date": "2018-09-25 08:59:58",
                        "plate": "ABC1234",
                        "deviceId": 123456,
                        "latitude": "-22.846767",
                        "longitude": "-47.083274",
                        "speed": "0",
                        "mainBattery": "12.32",
                        "odometer": "61731629",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",             
                        "complement": "",
                        "eventRef": "ALT_33",
                        "description": "Ligou Ignicao",
                        "eventStatus": "A",
                        "address": "CONDOMÍNIO PRAÇA CAPITAL - R. ADELAIDE DANIEL DE ALMEIDA, 140 - CENTRO, CAMPINAS - SP",
                        "driverId": "",
                        "ignition": "ON"
                    },
                    {
                        "eventId": 1118,
                        "date": "2018-09-24 19:59:58",
                        "plate": "ABC1234",
                        "deviceId": 123456,
                        "latitude": "-22.846767",
                        "longitude": "-47.083274",
                        "speed": "0",
                        "mainBattery": "12.32",
                        "odometer": "61731629",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",             
                        "complement": "",
                        "eventRef": "ALT_34",
                        "description": "Desligou Ignicao",
                        "eventStatus": "A",
                        "address": "CONDOMÍNIO PRAÇA CAPITAL - R. ADELAIDE DANIEL DE ALMEIDA, 140 - CENTRO, CAMPINAS - SP",
                        "driverId": "",
                        "ignition": "OFF"
                    },
                    {
                        "eventId": 1117,
                        "date": "2018-09-24 09:05:00",
                        "plate": "ABC1234",
                        "deviceId": 123456,
                        "latitude": "-22.846767",
                        "longitude": "-47.083274",
                        "speed": "0",
                        "mainBattery": "12.32",
                        "odometer": "61731629",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",             
                        "complement": "",
                        "eventRef": "ALT_33",
                        "description": "Ligou Ignicao",
                        "eventStatus": "A",
                        "address": "CONDOMÍNIO PRAÇA CAPITAL - R. ADELAIDE DANIEL DE ALMEIDA, 140 - CENTRO, CAMPINAS - SP",
                        "driverId": "",
                        "ignition": "ON"
                    },
                    {
                        "eventId": 1116,
                        "date": "2018-09-23 16:30:58",
                        "plate": "ABC1234",
                        "deviceId": 123456,
                        "latitude": "-22.846767",
                        "longitude": "-47.083274",
                        "speed": "0",
                        "mainBattery": "12.32",
                        "odometer": "61731629",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",             
                        "complement": "",
                        "eventRef": "ALT_34",
                        "description": "Desligou Ignicao",
                        "eventStatus": "A",
                        "address": "CONDOMÍNIO PRAÇA CAPITAL - R. ADELAIDE DANIEL DE ALMEIDA, 140 - CENTRO, CAMPINAS - SP",
                        "driverId": "",
                        "ignition": "OFF"
                    },
                    {
                        "eventId": 1115,
                        "date": "2018-09-23 10:00:00",
                        "plate": "ABC1234",
                        "deviceId": 123456,
                        "latitude": "-22.846767",
                        "longitude": "-47.083274",
                        "speed": "0",
                        "mainBattery": "12.32",
                        "odometer": "61731629",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",             
                        "complement": "",
                        "eventRef": "ALT_1",
                        "description": "Ultrapassou Limite de Velocidade",
                        "eventStatus": "A",
                        "address": "CONDOMÍNIO PRAÇA CAPITAL - R. ADELAIDE DANIEL DE ALMEIDA, 140 - CENTRO, CAMPINAS - SP",
                        "driverId": "",
                        "ignition": "ON"
                    },{
                        "eventId": 1114,
                        "date": "2018-09-23 08:10:25",
                        "plate": "ABC1234",
                        "deviceId": 123456,
                        "latitude": "-22.846767",
                        "longitude": "-47.083274",
                        "speed": "0",
                        "mainBattery": "12.32",
                        "odometer": "61731629",
                        "input1": "0",
                        "input2": "0",
                        "output1": "0",
                        "output2": "0",             
                        "complement": "",
                        "eventRef": "ALT_33",
                        "description": "Ligou Ignicao",
                        "eventStatus": "A",
                        "address": "CONDOMÍNIO PRAÇA CAPITAL - R. ADELAIDE DANIEL DE ALMEIDA, 140 - CENTRO, CAMPINAS - SP",
                        "driverId": "",
                        "ignition": "ON"
                    }
                ]
            }
            vehicleHistEvent.data.forEach(element => {
                $(".tableBody").append('<tr><td>' + element.eventId + '</td><td>' + element.date.substr(0,10).split('-').reverse().join('/') + '</td><td>' + element.date.substr(10,6) + '</td><td>' + element.plate + '</td><td>'+ parseFloat(element.odometer) + ' Km </td><td>' + element.ignition + '</td><td>'+ element.description + '</td></tr>')
            });
        </script>
        <script>
            $(document).ready(function() {
                //DOUGHNUT CHARTS
                var doughnutData = {
                    labels: ["Ultrapassou o Limite de Velocidade","Fora da Rota","Aceleracao brusca","Freada brusca"],
                    datasets: [{
                        data: [5,2,0,7],
                        backgroundColor: ["#a3e1d4","#dedede","#9CC3DA"]
                    }]
                } ;
                var doughnutOptions = {
                    responsive: false,
                    legend: {
                        display: false
                    }
                };
                var ctx4 = document.getElementById("doughnutChart2").getContext("2d");
                new Chart(ctx4, {type: 'doughnut', data: doughnutData, options:doughnutOptions});
        
                //BAR CHART
                var barData;
                var barOptions = { responsive: true };

                function renderGraph(display){
                    if(display == 0){
                        $("#btnHours").addClass('active');
                        $("#btnDays").removeClass('active');
                        $("#btnMonths").removeClass('active');
                        barData = {
                            labels: ["10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00","17:00","18:00","19:00","20:00","21:00"],
                            datasets: [
                                {
                                    label: "Tempo Trabalhado",
                                    backgroundColor: 'rgba(248, 172, 89, 0.5)',
                                    pointBorderColor: "#F8AC59",
                                    data: [15, 60, 60, 20, 56, 60, 40, 60, 12 , 15 , 0 , 0]
                                },
                                {
                                    label: "Tempo Parado",
                                    backgroundColor: 'rgba(35, 198, 200, 0.5)',
                                    borderColor: "rgba(26,179,148,0.7)",
                                    pointBackgroundColor: "rgba(26,179,148,1)",
                                    pointBorderColor: "#23C6C8",
                                    data: [45, 0, 0, 40, 04, 0, 20, 0, 48 , 45 , 60 , 60]
                                }   
                            ]
                        };
                    } else if(display == 1){
                        $("#btnHours").removeClass('active');
                        $("#btnDays").addClass('active');
                        $("#btnMonths").removeClass('active');
                        barData = {
                            labels: ["01", "02", "03", "04", "05", "06", "07"],
                            datasets: [
                                {
                                    label: "Tempo Trabalhado",
                                    backgroundColor: 'rgba(248, 172, 89, 0.5)',
                                    pointBorderColor: "#F8AC59",
                                    data: [(150/60).toFixed(0), (600/60).toFixed(0), (400/60).toFixed(0), (210/60).toFixed(0), (560/60).toFixed(0), (550/60).toFixed(0), (400/60).toFixed(0)]
                                },
                                {
                                    label: "Tempo Parado",
                                    backgroundColor: 'rgba(35, 198, 200, 0.5)',
                                    borderColor: "rgba(26,179,148,0.7)",
                                    pointBackgroundColor: "rgba(26,179,148,1)",
                                    pointBorderColor: "#23C6C8",
                                    data: [(250/60).toFixed(0), (90/60).toFixed(0), (150/60).toFixed(0), (420/60).toFixed(0), (600/60).toFixed(0), (275/60).toFixed(0), (337/60).toFixed(0)]
                                }
                            ]
                        };
                    } else {
                        $("#btnHours").removeClass('active');
                        $("#btnDays").removeClass('active');
                        $("#btnMonths").addClass('active');
                        barData = {
                            labels: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho"],
                            datasets: [
                                {
                                    label: "Tempo Trabalhado",
                                    backgroundColor: 'rgba(248, 172, 89, 0.5)',
                                    pointBorderColor: "#F8AC59",
                                    data: [(65000/60/60).toFixed(0), (590000/60/60).toFixed(0), (800000/60/60).toFixed(0), (810000/60/60).toFixed(0), (560000/60/60).toFixed(0), (550000/60/60).toFixed(0), (400000/60/60).toFixed(0)]
                                },
                                {
                                    label: "Tempo Parado",
                                    backgroundColor: 'rgba(35, 198, 200, 0.5)',
                                    borderColor: "rgba(26,179,148,0.7)",
                                    pointBackgroundColor: "rgba(26,179,148,1)",
                                    pointBorderColor: "#23C6C8",
                                    data: [(280000/60/60).toFixed(0), (480000/60/60).toFixed(0), (400000/60/60).toFixed(0), (190000/60/60).toFixed(0), (860000/60/60).toFixed(0), (270000/60/60).toFixed(0), (900000/60/60).toFixed(0)]
                                }
                            ]
                        };
                    }

                    $("#barChart").remove();
                    $("#chartDiv").append('<canvas id="barChart" height="75"></canvas>');
                    var ctx2 = document.getElementById("barChart").getContext("2d");
                    new Chart(ctx2, {type: 'bar', data: barData, options:barOptions});
                }
                renderGraph(0);
                $("#btnHours").click(function(){renderGraph(0)});
                $("#btnDays").click(function(){renderGraph(1)});
                $("#btnMonths").click(function(){renderGraph(2)});
                //END OF CHARTS

                //TESTE FLOT CHART RESPONSIVE
                var barOptions = {
                    series: {
                        bars: {
                            show: true,
                            barWidth: 0.3,
                            fill: true,
                            order: 1,
                            fillColor: {
                                colors: [{
                                    opacity: 0.4
                                }, {
                                    opacity: 0.4
                                }]
                            }
                        }
                    },
                    xaxis: {
                        tickDecimals: 0
                    },
                    colors: ["#1ab394"],
                    grid: {
                        color: "#999999",
                        hoverable: true,
                        clickable: true,
                        tickColor: "#D4D4D4",
                        borderWidth:0
                    },
                    legend: {
                        noColumns: 2,
                        show: false
                    },
                    tooltip: true,
                    tooltipOpts: {
                        content: "%s: %x:00 - %ym"
                    }
                };
                var barData = [
                    {
                        label: "Tempo Trabalhado",
                        data: [
                            [10, 10],
                            [11, 10],
                            [12, 10],
                            [13, 10],
                            [14, 10],
                            [15, 10],
                            [16, 10],
                            [17, 10],
                            [18, 10],
                            [19, 10],
                            [20, 10],
                            [21, 10]
                        ],
                        color: "#F8AC59"
                    },
                    {
                        label: "Tempo parado",
                        data: [
                            [10, 5],
                            [11, 5],
                            [12, 5],
                            [13, 5],
                            [14, 5],
                            [15, 5],
                            [16, 5],
                            [17, 5],
                            [18, 5],
                            [19, 5],
                            [20, 5],
                            [21, 5]
                        ],
                        color: "#23C6C8"
                    }
                ];
                $.plot($("#flot-bar-chart"), barData, barOptions);
            });

            //GoogleMaps Search position
           /*  function searchPos(plate){
                vehicleLastPos.data.forEach(element => {
                    if(element.plate == plate){
                        $('#deviceId').html(element.plate +' | '+element.deviceId+' <i class="fa fa-mobile text-navy"></i>')
                        $('#mainBattery1').html(element.mainBattery)
                        $('#mainBattery2').html(element.mainBattery+'%<i class="fa fa-bolt text-navy"></i>')
                        $("#mainBattery3").css('width',element.mainBattery + '%');
                        $('#backupBattery1').html(element.backupBattery);
                        $('#backupBattery2').html(element.backupBattery+'%<i class="fa fa-bolt text-navy"></i>')
                        $("#backupBattery3").css('width',element.backupBattery + '%');
                        $("#lastPosDate").html(element.date.substr(0,10).split('-').reverse().join('/') + ' ' + element.date.substr(10,6));
                    }
                });
            }
            searchPos('AAA1234'); */

        </script>
    </body>
</html>